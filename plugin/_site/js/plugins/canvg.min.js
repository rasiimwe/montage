(function(b,a){if(typeof define!=="undefined"&&define.amd){define("canvgModule",["rgbcolor","stackblur"],a)}else{if(typeof module!=="undefined"&&module.exports){module.exports=a(require("rgbcolor"),require("stackblur"))}}b.canvg=a(b.RGBColor,b.stackBlur)}(typeof window!=="undefined"?window:this,function(a,b){var h=function(v,y,o){if(v==null&&y==null&&o==null){var q=document.querySelectorAll("svg");for(var t=0;t<q.length;t++){var r=q[t];var w=document.createElement("canvas");w.width=r.clientWidth;w.height=r.clientHeight;r.parentNode.insertBefore(w,r);r.parentNode.removeChild(r);var p=document.createElement("div");p.appendChild(r);h(w,p.innerHTML)}return}if(typeof v=="string"){v=document.getElementById(v)}if(v.svg!=null){v.svg.stop()}var u=l(o||{});if(!(v.childNodes.length==1&&v.childNodes[0].nodeName=="OBJECT")){v.svg=u}var x=v.getContext("2d");if(typeof(y.documentElement)!="undefined"){u.loadXmlDoc(x,y)}else{if(y.substr(0,1)=="<"){u.loadXml(x,y)}else{u.load(x,y)}}};var n;if(typeof(Element.prototype.matches)!="undefined"){n=function(p,o){return p.matches(o)}}else{if(typeof(Element.prototype.webkitMatchesSelector)!="undefined"){n=function(p,o){return p.webkitMatchesSelector(o)}}else{if(typeof(Element.prototype.mozMatchesSelector)!="undefined"){n=function(p,o){return p.mozMatchesSelector(o)}}else{if(typeof(Element.prototype.msMatchesSelector)!="undefined"){n=function(p,o){return p.msMatchesSelector(o)}}else{if(typeof(Element.prototype.oMatchesSelector)!="undefined"){n=function(p,o){return p.oMatchesSelector(o)}}else{if(typeof jQuery==="function"||typeof Zepto==="function"){n=function(p,o){return $(p).is(o)}}if(typeof n==="undefined"){n=Sizzle.matchesSelector}}}}}}var e=/(\[[^\]]+\])/g;var d=/(#[^\s\+>~\.\[:]+)/g;var c=/(\.[^\s\+>~\.\[:]+)/g;var k=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi;var j=/(:[\w-]+\([^\)]*\))/gi;var m=/(:[^\s\+>~\.\[:]+)/g;var g=/([^\s\+>~\.\[:]+)/g;function f(o){var q=[0,0,0];var p=function(s,r){var t=o.match(s);if(t==null){return}q[r]+=t.length;o=o.replace(s," ")};o=o.replace(/:not\(([^\)]*)\)/g,"     $1 ");o=o.replace(/{[^]*/gm," ");p(e,1);p(d,0);p(c,1);p(k,2);p(j,1);p(m,1);o=o.replace(/[\*\s\+>~]/g," ");o=o.replace(/[#\.]/g," ");p(g,2);return q.join("")}function l(q){var p={opts:q};p.FRAMERATE=30;p.MAX_VIRTUAL_PIXELS=30000;p.log=function(r){};if(p.opts.log==true&&typeof(console)!="undefined"){p.log=function(r){console.log(r)}}p.init=function(r){var s=0;p.UniqueId=function(){s++;return"canvg"+s};p.Definitions={};p.Styles={};p.StylesSpecificity={};p.Animations=[];p.Images=[];p.ctx=r;p.ViewPort=new (function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(u,t){this.viewPorts.push({width:u,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(t){if(t!=null&&typeof(t)=="number"){return t}if(t=="x"){return this.width()}if(t=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}})};p.init();p.ImagesLoaded=function(){for(var r=0;r<p.Images.length;r++){if(!p.Images[r].loaded){return false}}return true};p.trim=function(r){return r.replace(/^\s+|\s+$/g,"")};p.compressSpaces=function(r){return r.replace(/[\s\r\t\n]+/gm," ")};p.ajax=function(s){var r;if(window.XMLHttpRequest){r=new XMLHttpRequest()}else{r=new ActiveXObject("Microsoft.XMLHTTP")}if(r){r.open("GET",s,false);r.send(null);return r.responseText}return null};p.parseXml=function(r){if(typeof(Windows)!="undefined"&&typeof(Windows.Data)!="undefined"&&typeof(Windows.Data.Xml)!="undefined"){var t=new Windows.Data.Xml.Dom.XmlDocument();var s=new Windows.Data.Xml.Dom.XmlLoadSettings();s.prohibitDtd=false;t.loadXml(r,s);return t}else{if(window.DOMParser){var u=new DOMParser();return u.parseFromString(r,"text/xml")}else{r=r.replace(/<!DOCTYPE svg[^>]*>/,"");var t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(r);return t}}};p.Property=function(r,s){this.name=r;this.value=s};p.Property.prototype.getValue=function(){return this.value};p.Property.prototype.hasValue=function(){return(this.value!=null&&this.value!=="")};p.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var r=parseFloat(this.value);if((this.value+"").match(/%$/)){r=r/100}return r};p.Property.prototype.valueOrDefault=function(r){if(this.hasValue()){return this.value}return r};p.Property.prototype.numValueOrDefault=function(r){if(this.hasValue()){return this.numValue()}return r};p.Property.prototype.addOpacity=function(t){var s=this.value;if(t.value!=null&&t.value!=""&&typeof(this.value)=="string"){var r=new a(this.value);if(r.ok){s="rgba("+r.r+", "+r.g+", "+r.b+", "+t.numValue()+")"}}return new p.Property(this.name,s)};p.Property.prototype.getDefinition=function(){var r=this.value.match(/#([^\)'"]+)/);if(r){r=r[1]}if(!r){r=this.value}return p.Definitions[r]};p.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};p.Property.prototype.getFillStyleDefinition=function(u,t){var r=this.getDefinition();if(r!=null&&r.createGradient){return r.createGradient(p.ctx,u,t)}if(r!=null&&r.createPattern){if(r.getHrefAttribute().hasValue()){var s=r.attribute("patternTransform");r=r.getHrefAttribute().getDefinition();if(s.hasValue()){r.attribute("patternTransform",true).value=s.value}}return r.createPattern(p.ctx,u)}return null};p.Property.prototype.getDPI=function(r){return 96};p.Property.prototype.getEM=function(t){var r=12;var s=new p.Property("fontSize",p.Font.Parse(p.ctx.font).fontSize);if(s.hasValue()){r=s.toPixels(t)}return r};p.Property.prototype.getUnits=function(){var r=this.value+"";return r.replace(/[0-9\.\-]/g,"")};p.Property.prototype.toPixels=function(u,r){if(!this.hasValue()){return 0}var t=this.value+"";if(t.match(/em$/)){return this.numValue()*this.getEM(u)}if(t.match(/ex$/)){return this.numValue()*this.getEM(u)/2}if(t.match(/px$/)){return this.numValue()}if(t.match(/pt$/)){return this.numValue()*this.getDPI(u)*(1/72)}if(t.match(/pc$/)){return this.numValue()*15}if(t.match(/cm$/)){return this.numValue()*this.getDPI(u)/2.54}if(t.match(/mm$/)){return this.numValue()*this.getDPI(u)/25.4}if(t.match(/in$/)){return this.numValue()*this.getDPI(u)}if(t.match(/%$/)){return this.numValue()*p.ViewPort.ComputeSize(u)}var v=this.numValue();if(r&&v<1){return v*p.ViewPort.ComputeSize(u)}return v};p.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var r=this.value+"";if(r.match(/s$/)){return this.numValue()*1000}if(r.match(/ms$/)){return this.numValue()}return this.numValue()};p.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var r=this.value+"";if(r.match(/deg$/)){return this.numValue()*(Math.PI/180)}if(r.match(/grad$/)){return this.numValue()*(Math.PI/200)}if(r.match(/rad$/)){return this.numValue()}return this.numValue()*(Math.PI/180)};var o={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};p.Property.prototype.toTextBaseline=function(){if(!this.hasValue()){return null}return o[this.value]};p.Font=new (function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(y,v,t,x,s,u){var w=u!=null?this.Parse(u):this.CreateFont("","","","","",p.ctx.font);return{fontFamily:s||w.fontFamily,fontSize:x||w.fontSize,fontStyle:y||w.fontStyle,fontWeight:t||w.fontWeight,fontVariant:v||w.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var r=this;this.Parse=function(v){var w={};var x=p.trim(p.compressSpaces(v||"")).split(" ");var y={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var t="";for(var u=0;u<x.length;u++){if(!y.fontStyle&&r.Styles.indexOf(x[u])!=-1){if(x[u]!="inherit"){w.fontStyle=x[u]}y.fontStyle=true}else{if(!y.fontVariant&&r.Variants.indexOf(x[u])!=-1){if(x[u]!="inherit"){w.fontVariant=x[u]}y.fontStyle=y.fontVariant=true}else{if(!y.fontWeight&&r.Weights.indexOf(x[u])!=-1){if(x[u]!="inherit"){w.fontWeight=x[u]}y.fontStyle=y.fontVariant=y.fontWeight=true}else{if(!y.fontSize){if(x[u]!="inherit"){w.fontSize=x[u].split("/")[0]}y.fontStyle=y.fontVariant=y.fontWeight=y.fontSize=true}else{if(x[u]!="inherit"){t+=x[u]}}}}}}if(t!=""){w.fontFamily=t}return w}});p.ToNumberArray=function(u){var r=p.trim(p.compressSpaces((u||"").replace(/,/g," "))).split(" ");for(var t=0;t<r.length;t++){r[t]=parseFloat(r[t])}return r};p.Point=function(r,s){this.x=r;this.y=s};p.Point.prototype.angleTo=function(r){return Math.atan2(r.y-this.y,r.x-this.x)};p.Point.prototype.applyTransform=function(r){var s=this.x*r[0]+this.y*r[2]+r[4];var t=this.x*r[1]+this.y*r[3]+r[5];this.x=s;this.y=t};p.CreatePoint=function(t){var r=p.ToNumberArray(t);return new p.Point(r[0],r[1])};p.CreatePath=function(u){var r=p.ToNumberArray(u);var v=[];for(var t=0;t<r.length;t+=2){v.push(new p.Point(r[t],r[t+1]))}return v};p.BoundingBox=function(s,u,r,t){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(v,w){if(v!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=v;this.x2=v}if(v<this.x1){this.x1=v}if(v>this.x2){this.x2=v}}if(w!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=w;this.y2=w}if(w<this.y1){this.y1=w}if(w>this.y2){this.y2=w}}};this.addX=function(v){this.addPoint(v,null)};this.addY=function(v){this.addPoint(null,v)};this.addBoundingBox=function(v){this.addPoint(v.x1,v.y1);this.addPoint(v.x2,v.y2)};this.addQuadraticCurve=function(A,z,w,v,C,B){var y=A+2/3*(w-A);var x=z+2/3*(v-z);var E=y+1/3*(C-A);var D=x+1/3*(B-z);this.addBezierCurve(A,z,y,E,x,D,C,B)};this.addBezierCurve=function(I,H,z,x,E,C,K,J){var A=[I,H],y=[z,x],w=[E,C],v=[K,J];this.addPoint(A[0],A[1]);this.addPoint(v[0],v[1]);for(i=0;i<=1;i++){var L=function(P){return Math.pow(1-P,3)*A[i]+3*Math.pow(1-P,2)*P*y[i]+3*(1-P)*Math.pow(P,2)*w[i]+Math.pow(P,3)*v[i]};var N=6*A[i]-12*y[i]+6*w[i];var O=-3*A[i]+9*y[i]-9*w[i]+3*v[i];var M=3*y[i]-3*A[i];if(O==0){if(N==0){continue}var G=-M/N;if(0<G&&G<1){if(i==0){this.addX(L(G))}if(i==1){this.addY(L(G))}}continue}var B=Math.pow(N,2)-4*M*O;if(B<0){continue}var F=(-N+Math.sqrt(B))/(2*O);if(0<F&&F<1){if(i==0){this.addX(L(F))}if(i==1){this.addY(L(F))}}var D=(-N-Math.sqrt(B))/(2*O);if(0<D&&D<1){if(i==0){this.addX(L(D))}if(i==1){this.addY(L(D))}}}};this.isPointInBox=function(v,w){return(this.x1<=v&&v<=this.x2&&this.y1<=w&&w<=this.y2)};this.addPoint(s,u);this.addPoint(r,t)};p.Transform=function(r){var y=this;this.Type={};this.Type.translate=function(v){this.p=p.CreatePoint(v);this.apply=function(s){s.translate(this.p.x||0,this.p.y||0)};this.unapply=function(s){s.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(s){s.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(A){var v=p.ToNumberArray(A);this.angle=new p.Property("angle",v[0]);this.cx=v[1]||0;this.cy=v[2]||0;this.apply=function(s){s.translate(this.cx,this.cy);s.rotate(this.angle.toRadians());s.translate(-this.cx,-this.cy)};this.unapply=function(s){s.translate(this.cx,this.cy);s.rotate(-1*this.angle.toRadians());s.translate(-this.cx,-this.cy)};this.applyToPoint=function(B){var s=this.angle.toRadians();B.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);B.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]);B.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(v){this.p=p.CreatePoint(v);this.apply=function(s){s.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(s){s.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(s){s.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(v){this.m=p.ToNumberArray(v);this.apply=function(s){s.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.unapply=function(J){var I=this.m[0];var H=this.m[2];var G=this.m[4];var F=this.m[1];var E=this.m[3];var D=this.m[5];var B=0;var A=0;var s=1;var C=1/(I*(E*s-D*A)-H*(F*s-D*B)+G*(F*A-E*B));J.transform(C*(E*s-D*A),C*(D*B-F*s),C*(G*A-H*s),C*(I*s-G*B),C*(H*D-G*E),C*(G*F-I*D))};this.applyToPoint=function(s){s.applyTransform(this.m)}};this.Type.SkewBase=function(v){this.base=y.Type.matrix;this.base(v);this.angle=new p.Property("angle",v)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(v){this.base=y.Type.SkewBase;this.base(v);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(v){this.base=y.Type.SkewBase;this.base(v);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(s){for(var v=0;v<this.transforms.length;v++){this.transforms[v].apply(s)}};this.unapply=function(s){for(var v=this.transforms.length-1;v>=0;v--){this.transforms[v].unapply(s)}};this.applyToPoint=function(v){for(var s=0;s<this.transforms.length;s++){this.transforms[s].applyToPoint(v)}};var z=p.trim(p.compressSpaces(r)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var u=0;u<z.length;u++){var x=p.trim(z[u].split("(")[0]);var w=z[u].split("(")[1].replace(")","");var t=new this.Type[x](w);t.type=x;this.transforms.push(t)}};p.AspectRatio=function(G,E,s,y,F,r,v,u,D,C){E=p.compressSpaces(E);E=E.replace(/^defer\s/,"");var x=E.split(" ")[0]||"xMidYMid";var t=E.split(" ")[1]||"meet";var B=s/y;var A=F/r;var w=Math.min(B,A);var z=Math.max(B,A);if(t=="meet"){y*=w;r*=w}if(t=="slice"){y*=z;r*=z}D=new p.Property("refX",D);C=new p.Property("refY",C);if(D.hasValue()&&C.hasValue()){G.translate(-w*D.toPixels("x"),-w*C.toPixels("y"))}else{if(x.match(/^xMid/)&&((t=="meet"&&w==A)||(t=="slice"&&z==A))){G.translate(s/2-y/2,0)}if(x.match(/YMid$/)&&((t=="meet"&&w==B)||(t=="slice"&&z==B))){G.translate(0,F/2-r/2)}if(x.match(/^xMax/)&&((t=="meet"&&w==A)||(t=="slice"&&z==A))){G.translate(s-y,0)}if(x.match(/YMax$/)&&((t=="meet"&&w==B)||(t=="slice"&&z==B))){G.translate(0,F-r)}}if(x=="none"){G.scale(B,A)}else{if(t=="meet"){G.scale(w,w)}else{if(t=="slice"){G.scale(z,z)}}}G.translate(v==null?0:-v,u==null?0:-u)};p.Element={};p.EmptyProperty=new p.Property("EMPTY","");p.Element.ElementBase=function(v){this.attributes={};this.styles={};this.stylesSpecificity={};this.children=[];this.attribute=function(B,C){var A=this.attributes[B];if(A!=null){return A}if(C==true){A=new p.Property(B,"");this.attributes[B]=A}return A||p.EmptyProperty};this.getHrefAttribute=function(){for(var A in this.attributes){if(A=="href"||A.match(/:href$/)){return this.attributes[A]}}return p.EmptyProperty};this.style=function(C,G,A){var D=this.styles[C];if(D!=null){return D}var B=this.attribute(C);if(B!=null&&B.hasValue()){this.styles[C]=B;return B}if(A!=true){var E=this.parent;if(E!=null){var F=E.style(C);if(F!=null&&F.hasValue()){return F}}}if(G==true){D=new p.Property(C,"");this.styles[C]=D}return D||p.EmptyProperty};this.render=function(B){if(this.style("display").value=="none"){return}if(this.style("visibility").value=="hidden"){return}B.save();if(this.style("mask").hasValue()){var A=this.style("mask").getDefinition();if(A!=null){A.apply(B,this)}}else{if(this.style("filter").hasValue()){var C=this.style("filter").getDefinition();if(C!=null){C.apply(B,this)}}else{this.setContext(B);this.renderChildren(B);this.clearContext(B)}}B.restore()};this.setContext=function(A){};this.clearContext=function(A){};this.renderChildren=function(A){for(var B=0;B<this.children.length;B++){this.children[B].render(A)}};this.addChild=function(B,A){var C=B;if(A){C=p.CreateElement(B)}C.parent=this;if(C.type!="title"){this.children.push(C)}};this.addStylesFromStyleDefinition=function(){for(var A in p.Styles){if(A[0]!="@"&&n(v,A)){var D=p.Styles[A];var C=p.StylesSpecificity[A];if(D!=null){for(var B in D){var E=this.stylesSpecificity[B];if(typeof(E)=="undefined"){E="000"}if(C>E){this.styles[B]=D[B];this.stylesSpecificity[B]=C}}}}}};if(v!=null&&v.nodeType==1){for(var w=0;w<v.attributes.length;w++){var u=v.attributes[w];this.attributes[u.nodeName]=new p.Property(u.nodeName,u.value)}this.addStylesFromStyleDefinition();if(this.attribute("style").hasValue()){var z=this.attribute("style").value.split(";");for(var w=0;w<z.length;w++){if(p.trim(z[w])!=""){var s=z[w].split(":");var t=p.trim(s[0]);var x=p.trim(s[1]);this.styles[t]=new p.Property(t,x)}}}if(this.attribute("id").hasValue()){if(p.Definitions[this.attribute("id").value]==null){p.Definitions[this.attribute("id").value]=this}}for(var w=0;w<v.childNodes.length;w++){var r=v.childNodes[w];if(r.nodeType==1){this.addChild(r,true)}if(this.captureTextNodes&&(r.nodeType==3||r.nodeType==4)){var y=r.value||r.text||r.textContent||"";if(p.compressSpaces(y)!=""){this.addChild(new p.Element.tspan(r),false)}}}}};p.Element.RenderedElementBase=function(r){this.base=p.Element.ElementBase;this.base(r);this.setContext=function(A){if(this.style("fill").isUrlDefinition()){var x=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(x!=null){A.fillStyle=x}}else{if(this.style("fill").hasValue()){var z=this.style("fill");if(z.value=="currentColor"){z.value=this.style("color").value}if(z.value!="inherit"){A.fillStyle=(z.value=="none"?"rgba(0,0,0,0)":z.value)}}}if(this.style("fill-opacity").hasValue()){var z=new p.Property("fill",A.fillStyle);z=z.addOpacity(this.style("fill-opacity"));A.fillStyle=z.value}if(this.style("stroke").isUrlDefinition()){var x=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(x!=null){A.strokeStyle=x}}else{if(this.style("stroke").hasValue()){var y=this.style("stroke");if(y.value=="currentColor"){y.value=this.style("color").value}if(y.value!="inherit"){A.strokeStyle=(y.value=="none"?"rgba(0,0,0,0)":y.value)}}}if(this.style("stroke-opacity").hasValue()){var y=new p.Property("stroke",A.strokeStyle);y=y.addOpacity(this.style("stroke-opacity"));A.strokeStyle=y.value}if(this.style("stroke-width").hasValue()){var w=this.style("stroke-width").toPixels();A.lineWidth=w==0?0.001:w}if(this.style("stroke-linecap").hasValue()){A.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){A.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){A.miterLimit=this.style("stroke-miterlimit").value}if(this.style("stroke-dasharray").hasValue()&&this.style("stroke-dasharray").value!="none"){var u=p.ToNumberArray(this.style("stroke-dasharray").value);if(typeof(A.setLineDash)!="undefined"){A.setLineDash(u)}else{if(typeof(A.webkitLineDash)!="undefined"){A.webkitLineDash=u}else{if(typeof(A.mozDash)!="undefined"&&!(u.length==1&&u[0]==0)){A.mozDash=u}}}var v=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof(A.lineDashOffset)!="undefined"){A.lineDashOffset=v}else{if(typeof(A.webkitLineDashOffset)!="undefined"){A.webkitLineDashOffset=v}else{if(typeof(A.mozDashOffset)!="undefined"){A.mozDashOffset=v}}}}if(typeof(A.font)!="undefined"){A.font=p.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.style("transform",false,true).hasValue()){var s=new p.Transform(this.style("transform",false,true).value);s.apply(A)}if(this.style("clip-path",false,true).hasValue()){var t=this.style("clip-path",false,true).getDefinition();if(t!=null){t.apply(A)}}if(this.style("opacity").hasValue()){A.globalAlpha=this.style("opacity").numValue()}}};p.Element.RenderedElementBase.prototype=new p.Element.ElementBase;p.Element.PathElementBase=function(r){this.base=p.Element.RenderedElementBase;this.base(r);this.path=function(s){if(s!=null){s.beginPath()}return new p.BoundingBox()};this.renderChildren=function(t){this.path(t);p.Mouse.checkPath(this,t);if(t.fillStyle!=""){if(this.style("fill-rule").valueOrDefault("inherit")!="inherit"){t.fill(this.style("fill-rule").value)}else{t.fill()}}if(t.strokeStyle!=""){t.stroke()}var v=this.getMarkers();if(v!=null){if(this.style("marker-start").isUrlDefinition()){var s=this.style("marker-start").getDefinition();s.render(t,v[0][0],v[0][1])}if(this.style("marker-mid").isUrlDefinition()){var s=this.style("marker-mid").getDefinition();for(var u=1;u<v.length-1;u++){s.render(t,v[u][0],v[u][1])}}if(this.style("marker-end").isUrlDefinition()){var s=this.style("marker-end").getDefinition();s.render(t,v[v.length-1][0],v[v.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};p.Element.PathElementBase.prototype=new p.Element.RenderedElementBase;p.Element.svg=function(r){this.base=p.Element.RenderedElementBase;this.base(r);this.baseClearContext=this.clearContext;this.clearContext=function(s){this.baseClearContext(s);p.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(v){v.strokeStyle="rgba(0,0,0,0)";v.lineCap="butt";v.lineJoin="miter";v.miterLimit=4;if(typeof(v.font)!="undefined"&&typeof(window.getComputedStyle)!="undefined"){v.font=window.getComputedStyle(v.canvas).getPropertyValue("font")}this.baseSetContext(v);if(!this.attribute("x").hasValue()){this.attribute("x",true).value=0}if(!this.attribute("y").hasValue()){this.attribute("y",true).value=0}v.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var w=p.ViewPort.width();var u=p.ViewPort.height();if(!this.attribute("width").hasValue()){this.attribute("width",true).value="100%"}if(!this.attribute("height").hasValue()){this.attribute("height",true).value="100%"}if(typeof(this.root)=="undefined"){w=this.attribute("width").toPixels("x");u=this.attribute("height").toPixels("y");var t=0;var B=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){t=-this.attribute("refX").toPixels("x");B=-this.attribute("refY").toPixels("y")}if(this.attribute("overflow").valueOrDefault("hidden")!="visible"){v.beginPath();v.moveTo(t,B);v.lineTo(w,B);v.lineTo(w,u);v.lineTo(t,u);v.closePath();v.clip()}}p.ViewPort.SetCurrent(w,u);if(this.attribute("viewBox").hasValue()){var z=p.ToNumberArray(this.attribute("viewBox").value);var s=z[0];var A=z[1];w=z[2];u=z[3];p.AspectRatio(v,this.attribute("preserveAspectRatio").value,p.ViewPort.width(),w,p.ViewPort.height(),u,s,A,this.attribute("refX").value,this.attribute("refY").value);p.ViewPort.RemoveCurrent();p.ViewPort.SetCurrent(z[2],z[3])}}};p.Element.svg.prototype=new p.Element.RenderedElementBase;p.Element.rect=function(r){this.base=p.Element.PathElementBase;this.base(r);this.path=function(u){var t=this.attribute("x").toPixels("x");var A=this.attribute("y").toPixels("y");var v=this.attribute("width").toPixels("x");var s=this.attribute("height").toPixels("y");var z=this.attribute("rx").toPixels("x");var w=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){w=z}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){z=w}z=Math.min(z,v/2);w=Math.min(w,s/2);if(u!=null){u.beginPath();u.moveTo(t+z,A);u.lineTo(t+v-z,A);u.quadraticCurveTo(t+v,A,t+v,A+w);u.lineTo(t+v,A+s-w);u.quadraticCurveTo(t+v,A+s,t+v-z,A+s);u.lineTo(t+z,A+s);u.quadraticCurveTo(t,A+s,t,A+s-w);u.lineTo(t,A+w);u.quadraticCurveTo(t,A,t+z,A);u.closePath()}return new p.BoundingBox(t,A,t+v,A+s)}};p.Element.rect.prototype=new p.Element.PathElementBase;p.Element.circle=function(r){this.base=p.Element.PathElementBase;this.base(r);this.path=function(t){var s=this.attribute("cx").toPixels("x");var v=this.attribute("cy").toPixels("y");var u=this.attribute("r").toPixels();if(t!=null){t.beginPath();t.arc(s,v,u,0,Math.PI*2,true);t.closePath()}return new p.BoundingBox(s-u,v-u,s+u,v+u)}};p.Element.circle.prototype=new p.Element.PathElementBase;p.Element.ellipse=function(r){this.base=p.Element.PathElementBase;this.base(r);this.path=function(t){var v=4*((Math.sqrt(2)-1)/3);var w=this.attribute("rx").toPixels("x");var u=this.attribute("ry").toPixels("y");var s=this.attribute("cx").toPixels("x");var x=this.attribute("cy").toPixels("y");if(t!=null){t.beginPath();t.moveTo(s,x-u);t.bezierCurveTo(s+(v*w),x-u,s+w,x-(v*u),s+w,x);t.bezierCurveTo(s+w,x+(v*u),s+(v*w),x+u,s,x+u);t.bezierCurveTo(s-(v*w),x+u,s-w,x+(v*u),s-w,x);t.bezierCurveTo(s-w,x-(v*u),s-(v*w),x-u,s,x-u);t.closePath()}return new p.BoundingBox(s-w,x-u,s+w,x+u)}};p.Element.ellipse.prototype=new p.Element.PathElementBase;p.Element.line=function(r){this.base=p.Element.PathElementBase;this.base(r);this.getPoints=function(){return[new p.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new p.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(s){var t=this.getPoints();if(s!=null){s.beginPath();s.moveTo(t[0].x,t[0].y);s.lineTo(t[1].x,t[1].y)}return new p.BoundingBox(t[0].x,t[0].y,t[1].x,t[1].y)};this.getMarkers=function(){var t=this.getPoints();var s=t[0].angleTo(t[1]);return[[t[0],s],[t[1],s]]}};p.Element.line.prototype=new p.Element.PathElementBase;p.Element.polyline=function(r){this.base=p.Element.PathElementBase;this.base(r);this.points=p.CreatePath(this.attribute("points").value);this.path=function(s){var u=new p.BoundingBox(this.points[0].x,this.points[0].y);if(s!=null){s.beginPath();s.moveTo(this.points[0].x,this.points[0].y)}for(var t=1;t<this.points.length;t++){u.addPoint(this.points[t].x,this.points[t].y);if(s!=null){s.lineTo(this.points[t].x,this.points[t].y)}}return u};this.getMarkers=function(){var t=[];for(var s=0;s<this.points.length-1;s++){t.push([this.points[s],this.points[s].angleTo(this.points[s+1])])}t.push([this.points[this.points.length-1],t[t.length-1][1]]);return t}};p.Element.polyline.prototype=new p.Element.PathElementBase;p.Element.polygon=function(r){this.base=p.Element.polyline;this.base(r);this.basePath=this.path;this.path=function(s){var t=this.basePath(s);if(s!=null){s.lineTo(this.points[0].x,this.points[0].y);s.closePath()}return t}};p.Element.polygon.prototype=new p.Element.polyline;p.Element.path=function(s){this.base=p.Element.PathElementBase;this.base(s);var t=this.attribute("d").value;t=t.replace(/,/gm," ");for(var r=0;r<2;r++){t=t.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2")}t=t.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");t=t.replace(/([0-9])([+\-])/gm,"$1 $2");for(var r=0;r<2;r++){t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2")}t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");t=p.compressSpaces(t);t=p.trim(t);this.PathParser=new (function(u){this.tokens=u.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new p.Point(0,0);this.control=new p.Point(0,0);this.current=new p.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var v=new p.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(v)};this.getAsControlPoint=function(){var v=this.getPoint();this.control=v;return v};this.getAsCurrentPoint=function(){var v=this.getPoint();this.current=v;return v};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var v=new p.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return v};this.makeAbsolute=function(v){if(this.isRelativeCommand()){v.x+=this.current.x;v.y+=this.current.y}return v};this.addMarker=function(w,x,v){if(v!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(v)}this.addMarkerAngle(w,x==null?null:x.angleTo(w))};this.addMarkerAngle=function(w,v){this.points.push(w);this.angles.push(v)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var w=0;w<this.angles.length;w++){if(this.angles[w]==null){for(var v=w+1;v<this.angles.length;v++){if(this.angles[v]!=null){this.angles[w]=this.angles[v];break}}}}return this.angles}})(t);this.path=function(S){var U=this.PathParser;U.reset();var F=new p.BoundingBox();if(S!=null){S.beginPath()}while(!U.isEnd()){U.nextCommand();switch(U.command){case"M":case"m":var P=U.getAsCurrentPoint();U.addMarker(P);F.addPoint(P.x,P.y);if(S!=null){S.moveTo(P.x,P.y)}U.start=U.current;while(!U.isCommandOrEnd()){var P=U.getAsCurrentPoint();U.addMarker(P,U.start);F.addPoint(P.x,P.y);if(S!=null){S.lineTo(P.x,P.y)}}break;case"L":case"l":while(!U.isCommandOrEnd()){var Y=U.current;var P=U.getAsCurrentPoint();U.addMarker(P,Y);F.addPoint(P.x,P.y);if(S!=null){S.lineTo(P.x,P.y)}}break;case"H":case"h":while(!U.isCommandOrEnd()){var y=new p.Point((U.isRelativeCommand()?U.current.x:0)+U.getScalar(),U.current.y);U.addMarker(y,U.current);U.current=y;F.addPoint(U.current.x,U.current.y);if(S!=null){S.lineTo(U.current.x,U.current.y)}}break;case"V":case"v":while(!U.isCommandOrEnd()){var y=new p.Point(U.current.x,(U.isRelativeCommand()?U.current.y:0)+U.getScalar());U.addMarker(y,U.current);U.current=y;F.addPoint(U.current.x,U.current.y);if(S!=null){S.lineTo(U.current.x,U.current.y)}}break;case"C":case"c":while(!U.isCommandOrEnd()){var W=U.current;var A=U.getPoint();var B=U.getAsControlPoint();var H=U.getAsCurrentPoint();U.addMarker(H,B,A);F.addBezierCurve(W.x,W.y,A.x,A.y,B.x,B.y,H.x,H.y);if(S!=null){S.bezierCurveTo(A.x,A.y,B.x,B.y,H.x,H.y)}}break;case"S":case"s":while(!U.isCommandOrEnd()){var W=U.current;var A=U.getReflectedControlPoint();var B=U.getAsControlPoint();var H=U.getAsCurrentPoint();U.addMarker(H,B,A);F.addBezierCurve(W.x,W.y,A.x,A.y,B.x,B.y,H.x,H.y);if(S!=null){S.bezierCurveTo(A.x,A.y,B.x,B.y,H.x,H.y)}}break;case"Q":case"q":while(!U.isCommandOrEnd()){var W=U.current;var B=U.getAsControlPoint();var H=U.getAsCurrentPoint();U.addMarker(H,B,B);F.addQuadraticCurve(W.x,W.y,B.x,B.y,H.x,H.y);if(S!=null){S.quadraticCurveTo(B.x,B.y,H.x,H.y)}}break;case"T":case"t":while(!U.isCommandOrEnd()){var W=U.current;var B=U.getReflectedControlPoint();U.control=B;var H=U.getAsCurrentPoint();U.addMarker(H,B,B);F.addQuadraticCurve(W.x,W.y,B.x,B.y,H.x,H.y);if(S!=null){S.quadraticCurveTo(B.x,B.y,H.x,H.y)}}break;case"A":case"a":while(!U.isCommandOrEnd()){var W=U.current;var E=U.getScalar();var D=U.getScalar();var x=U.getScalar()*(Math.PI/180);var G=U.getScalar();var C=U.getScalar();var H=U.getAsCurrentPoint();var ab=new p.Point(Math.cos(x)*(W.x-H.x)/2+Math.sin(x)*(W.y-H.y)/2,-Math.sin(x)*(W.x-H.x)/2+Math.cos(x)*(W.y-H.y)/2);var T=Math.pow(ab.x,2)/Math.pow(E,2)+Math.pow(ab.y,2)/Math.pow(D,2);if(T>1){E*=Math.sqrt(T);D*=Math.sqrt(T)}var L=(G==C?-1:1)*Math.sqrt(((Math.pow(E,2)*Math.pow(D,2))-(Math.pow(E,2)*Math.pow(ab.y,2))-(Math.pow(D,2)*Math.pow(ab.x,2)))/(Math.pow(E,2)*Math.pow(ab.y,2)+Math.pow(D,2)*Math.pow(ab.x,2)));if(isNaN(L)){L=0}var K=new p.Point(L*E*ab.y/D,L*-D*ab.x/E);var z=new p.Point((W.x+H.x)/2+Math.cos(x)*K.x-Math.sin(x)*K.y,(W.y+H.y)/2+Math.sin(x)*K.x+Math.cos(x)*K.y);var R=function(u){return Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2))};var N=function(ad,ac){return(ad[0]*ac[0]+ad[1]*ac[1])/(R(ad)*R(ac))};var Z=function(ad,ac){return(ad[0]*ac[1]<ad[1]*ac[0]?-1:1)*Math.acos(N(ad,ac))};var aa=Z([1,0],[(ab.x-K.x)/E,(ab.y-K.y)/D]);var J=[(ab.x-K.x)/E,(ab.y-K.y)/D];var I=[(-ab.x-K.x)/E,(-ab.y-K.y)/D];var X=Z(J,I);if(N(J,I)<=-1){X=Math.PI}if(N(J,I)>=1){X=0}var Q=1-C?1:-1;var V=aa+Q*(X/2);var w=new p.Point(z.x+E*Math.cos(V),z.y+D*Math.sin(V));U.addMarkerAngle(w,V-Q*Math.PI/2);U.addMarkerAngle(H,V-Q*Math.PI);F.addPoint(H.x,H.y);if(S!=null){var N=E>D?E:D;var O=E>D?1:E/D;var M=E>D?D/E:1;S.translate(z.x,z.y);S.rotate(x);S.scale(O,M);S.arc(0,0,N,aa,aa+X,1-C);S.scale(1/O,1/M);S.rotate(-x);S.translate(-z.x,-z.y)}}break;case"Z":case"z":if(S!=null){S.closePath()}U.current=U.start}}return F};this.getMarkers=function(){var v=this.PathParser.getMarkerPoints();var x=this.PathParser.getMarkerAngles();var w=[];for(var u=0;u<v.length;u++){w.push([v[u],x[u]])}return w}};p.Element.path.prototype=new p.Element.PathElementBase;p.Element.pattern=function(r){this.base=p.Element.ElementBase;this.base(r);this.createPattern=function(D,u){var s=this.attribute("width").toPixels("x",true);var C=this.attribute("height").toPixels("y",true);var A=new p.Element.svg();A.attributes.viewBox=new p.Property("viewBox",this.attribute("viewBox").value);A.attributes.width=new p.Property("width",s+"px");A.attributes.height=new p.Property("height",C+"px");A.attributes.transform=new p.Property("transform",this.attribute("patternTransform").value);A.children=this.children;var w=document.createElement("canvas");w.width=s;w.height=C;var t=w.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){t.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var B=-1;B<=1;B++){for(var z=-1;z<=1;z++){t.save();A.attributes.x=new p.Property("x",B*w.width);A.attributes.y=new p.Property("y",z*w.height);A.render(t);t.restore()}}var v=D.createPattern(w,"repeat");return v}};p.Element.pattern.prototype=new p.Element.ElementBase;p.Element.marker=function(r){this.base=p.Element.ElementBase;this.base(r);this.baseRender=this.render;this.render=function(t,s,v){t.translate(s.x,s.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){t.rotate(v)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){t.scale(t.lineWidth,t.lineWidth)}t.save();var u=new p.Element.svg();u.attributes.viewBox=new p.Property("viewBox",this.attribute("viewBox").value);u.attributes.refX=new p.Property("refX",this.attribute("refX").value);u.attributes.refY=new p.Property("refY",this.attribute("refY").value);u.attributes.width=new p.Property("width",this.attribute("markerWidth").value);u.attributes.height=new p.Property("height",this.attribute("markerHeight").value);u.attributes.fill=new p.Property("fill",this.attribute("fill").valueOrDefault("black"));u.attributes.stroke=new p.Property("stroke",this.attribute("stroke").valueOrDefault("none"));u.children=this.children;u.render(t);t.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){t.scale(1/t.lineWidth,1/t.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){t.rotate(-v)}t.translate(-s.x,-s.y)}};p.Element.marker.prototype=new p.Element.ElementBase;p.Element.defs=function(r){this.base=p.Element.ElementBase;this.base(r);this.render=function(s){}};p.Element.defs.prototype=new p.Element.ElementBase;p.Element.GradientBase=function(s){this.base=p.Element.ElementBase;this.base(s);this.stops=[];for(var r=0;r<this.children.length;r++){var t=this.children[r];if(t.type=="stop"){this.stops.push(t)}}this.getGradient=function(){};this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")};this.attributesToInherit=["gradientUnits"];this.inheritStopContainer=function(u){for(var w=0;w<this.attributesToInherit.length;w++){var v=this.attributesToInherit[w];if(!this.attribute(v).hasValue()&&u.attribute(v).hasValue()){this.attribute(v,true).value=u.attribute(v).value}}};this.createGradient=function(G,x,u){var F=this;if(this.getHrefAttribute().hasValue()){F=this.getHrefAttribute().getDefinition();this.inheritStopContainer(F)}var w=function(H){if(u.hasValue()){var I=new p.Property("color",H);return I.addOpacity(u).value}return H};var z=this.getGradient(G,x);if(z==null){return w(F.stops[F.stops.length-1].color)}for(var y=0;y<F.stops.length;y++){z.addColorStop(F.stops[y].offset,w(F.stops[y].color))}if(this.attribute("gradientTransform").hasValue()){var B=p.ViewPort.viewPorts[0];var C=new p.Element.rect();C.attributes.x=new p.Property("x",-p.MAX_VIRTUAL_PIXELS/3);C.attributes.y=new p.Property("y",-p.MAX_VIRTUAL_PIXELS/3);C.attributes.width=new p.Property("width",p.MAX_VIRTUAL_PIXELS);C.attributes.height=new p.Property("height",p.MAX_VIRTUAL_PIXELS);var E=new p.Element.g();E.attributes.transform=new p.Property("transform",this.attribute("gradientTransform").value);E.children=[C];var D=new p.Element.svg();D.attributes.x=new p.Property("x",0);D.attributes.y=new p.Property("y",0);D.attributes.width=new p.Property("width",B.width);D.attributes.height=new p.Property("height",B.height);D.children=[E];var A=document.createElement("canvas");A.width=B.width;A.height=B.height;var v=A.getContext("2d");v.fillStyle=z;D.render(v);return v.createPattern(A,"no-repeat")}return z}};p.Element.GradientBase.prototype=new p.Element.ElementBase;p.Element.linearGradient=function(r){this.base=p.Element.GradientBase;this.base(r);this.attributesToInherit.push("x1");this.attributesToInherit.push("y1");this.attributesToInherit.push("x2");this.attributesToInherit.push("y2");this.getGradient=function(s,w){var y=this.gradientUnits()=="objectBoundingBox"?w.getBoundingBox():null;if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var u=(this.gradientUnits()=="objectBoundingBox"?y.x()+y.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"));var x=(this.gradientUnits()=="objectBoundingBox"?y.y()+y.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"));var t=(this.gradientUnits()=="objectBoundingBox"?y.x()+y.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"));var v=(this.gradientUnits()=="objectBoundingBox"?y.y()+y.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y"));if(u==t&&x==v){return null}return s.createLinearGradient(u,x,t,v)}};p.Element.linearGradient.prototype=new p.Element.GradientBase;p.Element.radialGradient=function(r){this.base=p.Element.GradientBase;this.base(r);this.attributesToInherit.push("cx");this.attributesToInherit.push("cy");this.attributesToInherit.push("r");this.attributesToInherit.push("fx");this.attributesToInherit.push("fy");this.getGradient=function(t,u){var y=u.getBoundingBox();if(!this.attribute("cx").hasValue()){this.attribute("cx",true).value="50%"}if(!this.attribute("cy").hasValue()){this.attribute("cy",true).value="50%"}if(!this.attribute("r").hasValue()){this.attribute("r",true).value="50%"}var s=(this.gradientUnits()=="objectBoundingBox"?y.x()+y.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"));var z=(this.gradientUnits()=="objectBoundingBox"?y.y()+y.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"));var x=s;var v=z;if(this.attribute("fx").hasValue()){x=(this.gradientUnits()=="objectBoundingBox"?y.x()+y.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"))}if(this.attribute("fy").hasValue()){v=(this.gradientUnits()=="objectBoundingBox"?y.y()+y.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"))}var w=(this.gradientUnits()=="objectBoundingBox"?(y.width()+y.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels());return t.createRadialGradient(x,v,0,s,z,w)}};p.Element.radialGradient.prototype=new p.Element.GradientBase;p.Element.stop=function(s){this.base=p.Element.ElementBase;this.base(s);this.offset=this.attribute("offset").numValue();if(this.offset<0){this.offset=0}if(this.offset>1){this.offset=1}var r=this.style("stop-color",true);if(r.value===""){r.value="#000"}if(this.style("stop-opacity").hasValue()){r=r.addOpacity(this.style("stop-opacity"))}this.color=r.value};p.Element.stop.prototype=new p.Element.ElementBase;p.Element.AnimateBase=function(r){this.base=p.Element.ElementBase;this.base(r);p.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var t=this.attribute("attributeType").value;var s=this.attribute("attributeName").value;if(t=="CSS"){return this.parent.style(s,true)}return this.parent.attribute(s,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(v){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="freeze"&&!this.frozen){this.frozen=true;this.parent.animationFrozen=true;this.parent.animationFrozenValue=this.getProperty().value}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue;return true}}}return false}this.duration=this.duration+v;var s=false;if(this.begin<this.duration){var u=this.calcValue();if(this.attribute("type").hasValue()){var t=this.attribute("type").value;u=t+"("+u+")"}this.getProperty().value=u;s=true}return s};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue()){this.values.value=this.values.value.split(";")}this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var v=t.progress*(this.values.value.length-1);var u=Math.floor(v),s=Math.ceil(v);t.from=new p.Property("from",parseFloat(this.values.value[u]));t.to=new p.Property("to",parseFloat(this.values.value[s]));t.progress=(v-u)/(s-u)}else{t.from=this.from;t.to=this.to}return t}};p.Element.AnimateBase.prototype=new p.Element.ElementBase;p.Element.animate=function(r){this.base=p.Element.AnimateBase;this.base(r);this.calcValue=function(){var t=this.progress();var s=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return s+this.initialUnits}};p.Element.animate.prototype=new p.Element.AnimateBase;p.Element.animateColor=function(r){this.base=p.Element.AnimateBase;this.base(r);this.calcValue=function(){var v=this.progress();var x=new a(v.from.value);var w=new a(v.to.value);if(x.ok&&w.ok){var u=x.r+(w.r-x.r)*v.progress;var t=x.g+(w.g-x.g)*v.progress;var s=x.b+(w.b-x.b)*v.progress;return"rgb("+parseInt(u,10)+","+parseInt(t,10)+","+parseInt(s,10)+")"}return this.attribute("from").value}};p.Element.animateColor.prototype=new p.Element.AnimateBase;p.Element.animateTransform=function(r){this.base=p.Element.AnimateBase;this.base(r);this.calcValue=function(){var u=this.progress();var w=p.ToNumberArray(u.from.value);var v=p.ToNumberArray(u.to.value);var t="";for(var s=0;s<w.length;s++){t+=w[s]+(v[s]-w[s])*u.progress+" "}return t}};p.Element.animateTransform.prototype=new p.Element.animate;p.Element.font=function(s){this.base=p.Element.ElementBase;this.base(s);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var r=0;r<this.children.length;r++){var t=this.children[r];if(t.type=="font-face"){this.fontFace=t;if(t.style("font-family").hasValue()){p.Definitions[t.style("font-family").value]=this}}else{if(t.type=="missing-glyph"){this.missingGlyph=t}else{if(t.type=="glyph"){if(t.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof(this.glyphs[t.unicode])=="undefined"){this.glyphs[t.unicode]=[]}this.glyphs[t.unicode][t.arabicForm]=t}else{this.glyphs[t.unicode]=t}}}}}};p.Element.font.prototype=new p.Element.ElementBase;p.Element.fontface=function(r){this.base=p.Element.ElementBase;this.base(r);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};p.Element.fontface.prototype=new p.Element.ElementBase;p.Element.missingglyph=function(r){this.base=p.Element.path;this.base(r);this.horizAdvX=0};p.Element.missingglyph.prototype=new p.Element.path;p.Element.glyph=function(r){this.base=p.Element.path;this.base(r);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};p.Element.glyph.prototype=new p.Element.path;p.Element.text=function(r){this.captureTextNodes=true;this.base=p.Element.RenderedElementBase;this.base(r);this.baseSetContext=this.setContext;this.setContext=function(s){this.baseSetContext(s);var t=this.style("dominant-baseline").toTextBaseline();if(t==null){t=this.style("alignment-baseline").toTextBaseline()}if(t!=null){s.textBaseline=t}};this.getBoundingBox=function(){var s=this.attribute("x").toPixels("x");var u=this.attribute("y").toPixels("y");var t=this.parent.style("font-size").numValueOrDefault(p.Font.Parse(p.ctx.font).fontSize);return new p.BoundingBox(s,u-t,s+Math.floor(t*2/3)*this.children[0].getText().length,u)};this.renderChildren=function(s){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");if(this.attribute("dx").hasValue()){this.x+=this.attribute("dx").toPixels("x")}if(this.attribute("dy").hasValue()){this.y+=this.attribute("dy").toPixels("y")}this.x+=this.getAnchorDelta(s,this,0);for(var t=0;t<this.children.length;t++){this.renderChild(s,this,t)}};this.getAnchorDelta=function(t,x,w){var s=this.style("text-anchor").valueOrDefault("start");if(s!="start"){var v=0;for(var u=w;u<x.children.length;u++){var y=x.children[u];if(u>w&&y.attribute("x").hasValue()){break}v+=y.measureTextRecursive(t)}return -1*(s=="end"?v:v/2)}return 0};this.renderChild=function(s,u,t){var v=u.children[t];if(v.attribute("x").hasValue()){v.x=v.attribute("x").toPixels("x")+u.getAnchorDelta(s,u,t);if(v.attribute("dx").hasValue()){v.x+=v.attribute("dx").toPixels("x")}}else{if(v.attribute("dx").hasValue()){u.x+=v.attribute("dx").toPixels("x")}v.x=u.x}u.x=v.x+v.measureText(s);if(v.attribute("y").hasValue()){v.y=v.attribute("y").toPixels("y");if(v.attribute("dy").hasValue()){v.y+=v.attribute("dy").toPixels("y")}}else{if(v.attribute("dy").hasValue()){u.y+=v.attribute("dy").toPixels("y")}v.y=u.y}u.y=v.y;v.render(s);for(var t=0;t<v.children.length;t++){u.renderChild(s,v,t)}}};p.Element.text.prototype=new p.Element.RenderedElementBase;p.Element.TextElementBase=function(r){this.base=p.Element.RenderedElementBase;this.base(r);this.getGlyph=function(s,w,t){var x=w[t];var u=null;if(s.isArabic){var v="isolated";if((t==0||w[t-1]==" ")&&t<w.length-2&&w[t+1]!=" "){v="terminal"}if(t>0&&w[t-1]!=" "&&t<w.length-2&&w[t+1]!=" "){v="medial"}if(t>0&&w[t-1]!=" "&&(t==w.length-1||w[t+1]==" ")){v="initial"}if(typeof(s.glyphs[x])!="undefined"){u=s.glyphs[x][v];if(u==null&&s.glyphs[x].type=="glyph"){u=s.glyphs[x]}}}else{u=s.glyphs[x]}if(u==null){u=s.missingGlyph}return u};this.renderChildren=function(z){var x=this.parent.style("font-family").getDefinition();if(x!=null){var A=this.parent.style("font-size").numValueOrDefault(p.Font.Parse(p.ctx.font).fontSize);var u=this.parent.style("font-style").valueOrDefault(p.Font.Parse(p.ctx.font).fontStyle);var y=this.getText();if(x.isRTL){y=y.split("").reverse().join("")}var B=p.ToNumberArray(this.parent.attribute("dx").value);for(var v=0;v<y.length;v++){var w=this.getGlyph(x,y,v);var t=A/x.fontFace.unitsPerEm;z.translate(this.x,this.y);z.scale(t,-t);var s=z.lineWidth;z.lineWidth=z.lineWidth*x.fontFace.unitsPerEm/A;if(u=="italic"){z.transform(1,0,0.4,1,0,0)}w.render(z);if(u=="italic"){z.transform(1,0,-0.4,1,0,0)}z.lineWidth=s;z.scale(1/t,-1/t);z.translate(-this.x,-this.y);this.x+=A*(w.horizAdvX||x.horizAdvX)/x.fontFace.unitsPerEm;if(typeof(B[v])!="undefined"&&!isNaN(B[v])){this.x+=B[v]}}return}if(z.fillStyle!=""){z.fillText(p.compressSpaces(this.getText()),this.x,this.y)}if(z.strokeStyle!=""){z.strokeText(p.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(s){var u=this.measureText(s);for(var t=0;t<this.children.length;t++){u+=this.children[t].measureTextRecursive(s)}return u};this.measureText=function(z){var x=this.parent.style("font-family").getDefinition();if(x!=null){var A=this.parent.style("font-size").numValueOrDefault(p.Font.Parse(p.ctx.font).fontSize);var t=0;var y=this.getText();if(x.isRTL){y=y.split("").reverse().join("")}var B=p.ToNumberArray(this.parent.attribute("dx").value);for(var v=0;v<y.length;v++){var w=this.getGlyph(x,y,v);t+=(w.horizAdvX||x.horizAdvX)*A/x.fontFace.unitsPerEm;if(typeof(B[v])!="undefined"&&!isNaN(B[v])){t+=B[v]}}return t}var s=p.compressSpaces(this.getText());if(!z.measureText){return s.length*10}z.save();this.setContext(z);var u=z.measureText(s).width;z.restore();return u}};p.Element.TextElementBase.prototype=new p.Element.RenderedElementBase;p.Element.tspan=function(r){this.captureTextNodes=true;this.base=p.Element.TextElementBase;this.base(r);this.text=p.compressSpaces(r.value||r.text||r.textContent||"");this.getText=function(){if(this.children.length>0){return""}return this.text}};p.Element.tspan.prototype=new p.Element.TextElementBase;p.Element.tref=function(r){this.base=p.Element.TextElementBase;this.base(r);this.getText=function(){var s=this.getHrefAttribute().getDefinition();if(s!=null){return s.children[0].getText()}}};p.Element.tref.prototype=new p.Element.TextElementBase;p.Element.a=function(s){this.base=p.Element.TextElementBase;this.base(s);this.hasText=s.childNodes.length>0;for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType!=3){this.hasText=false}}this.text=this.hasText?s.childNodes[0].value:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var v=new p.Property("fontSize",p.Font.Parse(p.ctx.font).fontSize);p.Mouse.checkBoundingBox(this,new p.BoundingBox(this.x,this.y-v.toPixels("y"),this.x+this.measureText(t),this.y))}else{if(this.children.length>0){var u=new p.Element.g();u.children=this.children;u.parent=this;u.render(t)}}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){p.ctx.canvas.style.cursor="pointer"}};p.Element.a.prototype=new p.Element.TextElementBase;p.Element.image=function(t){this.base=p.Element.RenderedElementBase;this.base(t);var s=this.getHrefAttribute().value;if(s==""){return}var u=s.match(/\.svg$/);p.Images.push(this);this.loaded=false;if(!u){this.img=document.createElement("img");if(p.opts.useCORS==true){this.img.crossOrigin="Anonymous"}var r=this;this.img.onload=function(){r.loaded=true};this.img.onerror=function(){p.log('ERROR: image "'+s+'" not found');r.loaded=true};this.img.src=s}else{this.img=p.ajax(s);this.loaded=true}this.renderChildren=function(z){var w=this.attribute("x").toPixels("x");var B=this.attribute("y").toPixels("y");var A=this.attribute("width").toPixels("x");var v=this.attribute("height").toPixels("y");if(A==0||v==0){return}z.save();if(u){z.drawSvg(this.img,w,B,A,v)}else{z.translate(w,B);p.AspectRatio(z,this.attribute("preserveAspectRatio").value,A,this.img.width,v,this.img.height,0,0);z.drawImage(this.img,0,0)}z.restore()};this.getBoundingBox=function(){var w=this.attribute("x").toPixels("x");var A=this.attribute("y").toPixels("y");var z=this.attribute("width").toPixels("x");var v=this.attribute("height").toPixels("y");return new p.BoundingBox(w,A,w+z,A+v)}};p.Element.image.prototype=new p.Element.RenderedElementBase;p.Element.g=function(r){this.base=p.Element.RenderedElementBase;this.base(r);this.getBoundingBox=function(){var t=new p.BoundingBox();for(var s=0;s<this.children.length;s++){t.addBoundingBox(this.children[s].getBoundingBox())}return t}};p.Element.g.prototype=new p.Element.RenderedElementBase;p.Element.symbol=function(r){this.base=p.Element.RenderedElementBase;this.base(r);this.render=function(s){}};p.Element.symbol.prototype=new p.Element.RenderedElementBase;p.Element.style=function(H){this.base=p.Element.ElementBase;this.base(H);var D="";for(var K=0;K<H.childNodes.length;K++){D+=H.childNodes[K].data}D=D.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");D=p.compressSpaces(D);var C=D.split("}");for(var K=0;K<C.length;K++){if(p.trim(C[K])!=""){var O=C[K].split("{");var v=O[0].split(",");var r=O[1].split(";");for(var J=0;J<v.length;J++){var A=p.trim(v[J]);if(A!=""){var u=p.Styles[A]||{};for(var I=0;I<r.length;I++){var t=r[I].indexOf(":");var P=r[I].substr(0,t);var G=r[I].substr(t+1,r[I].length-t);if(P!=null&&G!=null){u[p.trim(P)]=new p.Property(p.trim(P),p.trim(G))}}p.Styles[A]=u;p.StylesSpecificity[A]=f(A);if(A=="@font-face"){var M=u["font-family"].value.replace(/"/g,"");var B=u.src.value.split(",");for(var E=0;E<B.length;E++){if(B[E].indexOf('format("svg")')>0){var y=B[E].indexOf("url");var x=B[E].indexOf(")",y);var w=B[E].substr(y+5,x-y-6);var N=p.parseXml(p.ajax(w));var z=N.getElementsByTagName("font");for(var L=0;L<z.length;L++){var F=p.CreateElement(z[L]);p.Definitions[M]=F}}}}}}}}};p.Element.style.prototype=new p.Element.ElementBase;p.Element.use=function(s){this.base=p.Element.RenderedElementBase;this.base(s);this.baseSetContext=this.setContext;this.setContext=function(t){this.baseSetContext(t);if(this.attribute("x").hasValue()){t.translate(this.attribute("x").toPixels("x"),0)}if(this.attribute("y").hasValue()){t.translate(0,this.attribute("y").toPixels("y"))}};var r=this.getHrefAttribute().getDefinition();this.path=function(t){if(r!=null){r.path(t)}};this.getBoundingBox=function(){if(r!=null){return r.getBoundingBox()}};this.renderChildren=function(t){if(r!=null){var v=r;if(r.type=="symbol"){v=new p.Element.svg();v.type="svg";v.attributes.viewBox=new p.Property("viewBox",r.attribute("viewBox").value);v.attributes.preserveAspectRatio=new p.Property("preserveAspectRatio",r.attribute("preserveAspectRatio").value);v.attributes.overflow=new p.Property("overflow",r.attribute("overflow").value);v.children=r.children}if(v.type=="svg"){if(this.attribute("width").hasValue()){v.attributes.width=new p.Property("width",this.attribute("width").value)}if(this.attribute("height").hasValue()){v.attributes.height=new p.Property("height",this.attribute("height").value)}}var u=v.parent;v.parent=null;v.render(t);v.parent=u}}};p.Element.use.prototype=new p.Element.RenderedElementBase;p.Element.mask=function(r){this.base=p.Element.ElementBase;this.base(r);this.apply=function(E,u){var C=this.attribute("x").toPixels("x");var B=this.attribute("y").toPixels("y");var s=this.attribute("width").toPixels("x");var D=this.attribute("height").toPixels("y");if(s==0&&D==0){var w=new p.BoundingBox();for(var v=0;v<this.children.length;v++){w.addBoundingBox(this.children[v].getBoundingBox())}var C=Math.floor(w.x1);var B=Math.floor(w.y1);var s=Math.floor(w.width());var D=Math.floor(w.height())}var G=u.attribute("mask").value;u.attribute("mask").value="";var A=document.createElement("canvas");A.width=C+s;A.height=B+D;var F=A.getContext("2d");this.renderChildren(F);var z=document.createElement("canvas");z.width=C+s;z.height=B+D;var t=z.getContext("2d");u.render(t);t.globalCompositeOperation="destination-in";t.fillStyle=F.createPattern(A,"no-repeat");t.fillRect(0,0,C+s,B+D);E.fillStyle=t.createPattern(z,"no-repeat");E.fillRect(0,0,C+s,B+D);u.attribute("mask").value=G};this.render=function(s){}};p.Element.mask.prototype=new p.Element.ElementBase;p.Element.clipPath=function(r){this.base=p.Element.ElementBase;this.base(r);this.apply=function(s){var w=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var v=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){};w.call(s);for(var u=0;u<this.children.length;u++){var x=this.children[u];if(typeof(x.path)!="undefined"){var t=null;if(x.style("transform",false,true).hasValue()){t=new p.Transform(x.style("transform",false,true).value);t.apply(s)}x.path(s);CanvasRenderingContext2D.prototype.closePath=v;if(t){t.unapply(s)}}}v.call(s);s.clip();CanvasRenderingContext2D.prototype.beginPath=w;CanvasRenderingContext2D.prototype.closePath=v};this.render=function(s){}};p.Element.clipPath.prototype=new p.Element.ElementBase;p.Element.filter=function(r){this.base=p.Element.ElementBase;this.base(r);this.apply=function(H,z){var A=z.getBoundingBox();var E=Math.floor(A.x1);var C=Math.floor(A.y1);var t=Math.floor(A.width());var G=Math.floor(A.height());var u=z.style("filter").value;z.style("filter").value="";var F=0,D=0;for(var w=0;w<this.children.length;w++){var s=this.children[w].extraFilterDistance||0;F=Math.max(F,s);D=Math.max(D,s)}var B=document.createElement("canvas");B.width=t+2*F;B.height=G+2*D;var v=B.getContext("2d");v.translate(-E+F,-C+D);z.render(v);for(var w=0;w<this.children.length;w++){if(typeof(this.children[w].apply)==="function"){this.children[w].apply(v,0,0,t+2*F,G+2*D)}}H.drawImage(B,0,0,t+2*F,G+2*D,E-F,C-D,t+2*F,G+2*D);z.style("filter",true).value=u};this.render=function(s){}};p.Element.filter.prototype=new p.Element.ElementBase;p.Element.feMorphology=function(r){this.base=p.Element.ElementBase;this.base(r);this.apply=function(u,t,w,v,s){}};p.Element.feMorphology.prototype=new p.Element.ElementBase;p.Element.feComposite=function(r){this.base=p.Element.ElementBase;this.base(r);this.apply=function(u,t,w,v,s){}};p.Element.feComposite.prototype=new p.Element.ElementBase;p.Element.feColorMatrix=function(y){this.base=p.Element.ElementBase;this.base(y);var v=p.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var x=v[0];v=[0.213+0.787*x,0.715-0.715*x,0.072-0.072*x,0,0,0.213-0.213*x,0.715+0.285*x,0.072-0.072*x,0,0,0.213-0.213*x,0.715-0.715*x,0.072+0.928*x,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var u=v[0]*Math.PI/180;var z=function(B,A,s){return B+Math.cos(u)*A+Math.sin(u)*s};v=[z(0.213,0.787,-0.213),z(0.715,-0.715,-0.715),z(0.072,-0.072,0.928),0,0,z(0.213,-0.213,0.143),z(0.715,0.285,0.14),z(0.072,-0.072,-0.283),0,0,z(0.213,-0.213,-0.787),z(0.715,-0.715,0.715),z(0.072,0.928,0.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0,1];break}function w(B,A,E,D,s,C){return B[E*D*4+A*4+C]}function t(B,A,F,D,s,C,E){B[F*D*4+A*4+C]=E}function r(B,A){var s=v[B];return s*(s<0?A-255:A)}this.apply=function(I,G,E,A,H){var C=I.getImageData(0,0,A,H);for(var E=0;E<H;E++){for(var G=0;G<A;G++){var s=w(C.data,G,E,A,H,0);var B=w(C.data,G,E,A,H,1);var D=w(C.data,G,E,A,H,2);var F=w(C.data,G,E,A,H,3);t(C.data,G,E,A,H,0,r(0,s)+r(1,B)+r(2,D)+r(3,F)+r(4,1));t(C.data,G,E,A,H,1,r(5,s)+r(6,B)+r(7,D)+r(8,F)+r(9,1));t(C.data,G,E,A,H,2,r(10,s)+r(11,B)+r(12,D)+r(13,F)+r(14,1));t(C.data,G,E,A,H,3,r(15,s)+r(16,B)+r(17,D)+r(18,F)+r(19,1))}}I.clearRect(0,0,A,H);I.putImageData(C,0,0)}};p.Element.feColorMatrix.prototype=new p.Element.ElementBase;p.Element.feGaussianBlur=function(r){this.base=p.Element.ElementBase;this.base(r);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(u,t,w,v,s){if(typeof(b.canvasRGBA)=="undefined"){p.log("ERROR: StackBlur.js must be included for blur to work");return}u.canvas.id=p.UniqueId();u.canvas.style.display="none";document.body.appendChild(u.canvas);b.canvasRGBA(u.canvas.id,t,w,v,s,this.blurRadius);document.body.removeChild(u.canvas)}};p.Element.feGaussianBlur.prototype=new p.Element.ElementBase;p.Element.title=function(r){};p.Element.title.prototype=new p.Element.ElementBase;p.Element.desc=function(r){};p.Element.desc.prototype=new p.Element.ElementBase;p.Element.MISSING=function(r){p.log("ERROR: Element '"+r.nodeName+"' not yet implemented.")};p.Element.MISSING.prototype=new p.Element.ElementBase;p.CreateElement=function(s){var r=s.nodeName.replace(/^[^:]+:/,"");r=r.replace(/\-/g,"");var t=null;if(typeof(p.Element[r])!="undefined"){t=new p.Element[r](s)}else{t=new p.Element.MISSING(s)}t.type=s.nodeName;return t};p.load=function(r,s){p.loadXml(r,p.ajax(s))};p.loadXml=function(r,s){p.loadXmlDoc(r,p.parseXml(s))};p.loadXmlDoc=function(u,x){p.init(u);var t=function(z){var y=u.canvas;while(y){z.x-=y.offsetLeft;z.y-=y.offsetTop;y=y.offsetParent}if(window.scrollX){z.x+=window.scrollX}if(window.scrollY){z.y+=window.scrollY}return z};if(p.opts.ignoreMouse!=true){u.canvas.onclick=function(z){var y=t(new p.Point(z!=null?z.clientX:event.clientX,z!=null?z.clientY:event.clientY));p.Mouse.onclick(y.x,y.y)};u.canvas.onmousemove=function(z){var y=t(new p.Point(z!=null?z.clientX:event.clientX,z!=null?z.clientY:event.clientY));p.Mouse.onmousemove(y.x,y.y)}}var w=p.CreateElement(x.documentElement);w.root=true;w.addStylesFromStyleDefinition();var v=true;var s=function(){p.ViewPort.Clear();if(u.canvas.parentNode){p.ViewPort.SetCurrent(u.canvas.parentNode.clientWidth,u.canvas.parentNode.clientHeight)}if(p.opts.ignoreDimensions!=true){if(w.style("width").hasValue()){u.canvas.width=w.style("width").toPixels("x");u.canvas.style.width=u.canvas.width+"px"}if(w.style("height").hasValue()){u.canvas.height=w.style("height").toPixels("y");u.canvas.style.height=u.canvas.height+"px"}}var A=u.canvas.clientWidth||u.canvas.width;var z=u.canvas.clientHeight||u.canvas.height;if(p.opts.ignoreDimensions==true&&w.style("width").hasValue()&&w.style("height").hasValue()){A=w.style("width").toPixels("x");z=w.style("height").toPixels("y")}p.ViewPort.SetCurrent(A,z);if(p.opts.offsetX!=null){w.attribute("x",true).value=p.opts.offsetX}if(p.opts.offsetY!=null){w.attribute("y",true).value=p.opts.offsetY}if(p.opts.scaleWidth!=null||p.opts.scaleHeight!=null){var B=null,y=null,C=p.ToNumberArray(w.attribute("viewBox").value);if(p.opts.scaleWidth!=null){if(w.attribute("width").hasValue()){B=w.attribute("width").toPixels("x")/p.opts.scaleWidth}else{if(!isNaN(C[2])){B=C[2]/p.opts.scaleWidth}}}if(p.opts.scaleHeight!=null){if(w.attribute("height").hasValue()){y=w.attribute("height").toPixels("y")/p.opts.scaleHeight}else{if(!isNaN(C[3])){y=C[3]/p.opts.scaleHeight}}}if(B==null){B=y}if(y==null){y=B}w.attribute("width",true).value=p.opts.scaleWidth;w.attribute("height",true).value=p.opts.scaleHeight;w.style("transform",true,true).value+=" scale("+(1/B)+","+(1/y)+")"}if(p.opts.ignoreClear!=true){u.clearRect(0,0,A,z)}w.render(u);if(v){v=false;if(typeof(p.opts.renderCallback)=="function"){p.opts.renderCallback(x)}}};var r=true;if(p.ImagesLoaded()){r=false;s()}p.intervalID=setInterval(function(){var z=false;if(r&&p.ImagesLoaded()){r=false;z=true}if(p.opts.ignoreMouse!=true){z=z|p.Mouse.hasEvents()}if(p.opts.ignoreAnimation!=true){for(var y=0;y<p.Animations.length;y++){z=z|p.Animations[y].update(1000/p.FRAMERATE)}}if(typeof(p.opts.forceRedraw)=="function"){if(p.opts.forceRedraw()==true){z=true}}if(z){s();p.Mouse.runEvents()}},1000/p.FRAMERATE)};p.stop=function(){if(p.intervalID){clearInterval(p.intervalID)}};p.Mouse=new (function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(r,s){this.events.push({type:"onclick",x:r,y:s,run:function(t){if(t.onclick){t.onclick()}}})};this.onmousemove=function(r,s){this.events.push({type:"onmousemove",x:r,y:s,run:function(t){if(t.onmousemove){t.onmousemove()}}})};this.eventElements=[];this.checkPath=function(t,r){for(var s=0;s<this.events.length;s++){var u=this.events[s];if(r.isPointInPath&&r.isPointInPath(u.x,u.y)){this.eventElements[s]=t}}};this.checkBoundingBox=function(s,u){for(var r=0;r<this.events.length;r++){var t=this.events[r];if(u.isPointInBox(t.x,t.y)){this.eventElements[r]=s}}};this.runEvents=function(){p.ctx.canvas.style.cursor="";for(var s=0;s<this.events.length;s++){var t=this.events[s];var r=this.eventElements[s];while(r){t.run(r);r=r.parent}}this.events=[];this.eventElements=[]}});return p}if(typeof(CanvasRenderingContext2D)!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(r,p,o,q,t){h(this.canvas,r,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:p,offsetY:o,scaleWidth:q,scaleHeight:t})}}return h}));